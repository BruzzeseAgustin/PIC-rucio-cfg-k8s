image:
  tag: release-1.24.2
  pullPolicy: Always

# automatixCount: 1
abacusAccountCount: 2
abacusRseCount: 2
abacusCollectionReplicaCount: 2
conveyorTransferSubmitterCount: 2
conveyorPollerCount: 2
conveyorFinisherCount: 2
conveyorReceiverCount: 2
conveyorThrottlerCount: 2
hermesCount: 2
judgeCleanerCount: 1
judgeEvaluatorCount: 1
judgeInjectorCount: 2
judgeRepairerCount: 1
tracerKronosCount: 1
transmogrifierCount: 1
undertakerCount: 1
reaper2Count: 2
reaperCount: 1
minosCount: 1
necromancerCount: 1
undertakerCount: 1

monitoring:
  enabled: true
  exporterPort: 9090
  targetPort: 9090
  interval: 60s
  telemetryPath: /metrics
  labels:
    app: prometheus

abacusAccount:
  threads: 1
  resources:
    requests:
      memory: "64Mi"
      cpu: "25m"
    limits:
      memory: "256Mi"
      cpu: "50m"

abacusCollectionReplica:
  threads: 1
  resources:
    limits:
      memory: "200Mi"
      cpu: "700m"
    requests:
      memory: "200Mi"
      cpu: "700m"

abacusRse:
  threads: 1
  resources:
    requests:
      memory: "64Mi"
      cpu: "25m"
    limits:
      memory: "256Mi"
      cpu: "50m"

undertaker:
  threads: 1
  resources:
    limits:
      memory: "200Mi"
      cpu: "700m"
    requests:
      memory: "200Mi"
      cpu: "700m"

reaper:
  resources:
    limits:
      cpu: 1
      memory: 1Gi
    requests:
      cpu: 50m
      memory: 128Mi
  greedy: 1
  totalWorkers: 2
  threadsPerWorker: 2

reaper2:
  greedy: 1
  threads: 1
  sleepTime: 60
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "100m"

undertaker:
  threads: 1
  resources:
    requests:
      memory: "64Mi"
      cpu: "25m"
    limits:
      memory: "256Mi"
      cpu: "50m"

conveyorTransferSubmitter:
  threads: 5
  sleepTime: 2
  activities: "'Data Brokering' 'Data rebalancing' 'Debug' 'Express' 'Functional Test' 'Group Subscriptions' 'Production Input' 'Production Output' 'Analysis Input' 'Analysis Output' 'Staging' 'T0 Export' 'T0 Tape' 'Upload/Download (Job)' 'Upload/Download (User)' 'User Subscriptions'"
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "200m"

conveyorPoller:
  threads: 4
  sleepTime: 2
  olderThan: 0
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "200m"

conveyorFinisher:
  threads: 2
  sleepTime: 5
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "200m"

judgeCleaner:
  threads: 1
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "200m"

judgeEvaluator:
  threads: 1
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "200m"

hermes:
  useSSL: 1
  threads: 5
  bulk: 500
  brokerTimeout: 120

judgeRepairer:
  threads: 1
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "200m"


judgeInjector:
  threads: 1
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "200m"

reaper:
  workers: 60
  threadsPerWorker: 1
  greedy: 1

ftsRenewal:
  enabled: 1
  image:
    repository: rucio/fts-cron
    tag: latest
  servers: "https://fts01.pic.es:8446"

transmogrifierResources:
    requests:
      memory: 200Mi
    limits:
      memory: 1450Mi

tracerKronos:
  resources:
    limits:
      cpu: 3000m 
    requests:
      cpu: 1000m 

judgeEvaluator: 
  resources:
    limits:
      cpu: 3750m 
    requests:
      cpu: 750m 

judgeCleaner:
  threads: 2
  resources:
    limits:
      cpu: 3750m 
      memory: 4000Mi
    requests:
      cpu: 750m 
      memory: 400Mi

judgeInjector:
  threads: 2
  resources:
    limits:
      cpu: 3750m 
      memory: 8000Mi
    requests:
      cpu: 750m 
      memory: 400Mi

judgeRepairer:
  resources:
    limits:
      cpu: 3750m 
    requests:
      cpu: 750m 

additionalSecrets:
  x509up:
    secretName: rucio-x509up-reaper
    mountPath: /opt/proxy/x509up.pem
    subPath: x509up.pem

config:
  httpd:
    hostname: "pic01-rucio-server.pic.es"
    hostcert: "hostcert.pem"
    hostkey: "hostkey.pem"
    ca_cert: "/etc/grid-security/ca.pem"
    ServerAlias: "pic01-rucio-server.pic.es" # should match hostname (above)
    ServerName: "pic01-rucio-server.pic.es" # should match hostcert
    ServerAdmin: "bruzzese@pic.es"

  database:
    default: "postgresql://rucio:secret@rucio-db-mirror/rucio"
    schema: "pic01-rucio"

  messaging_hermes:
    username: "hermes"
    password: "supersecret"
    port: "61616"
    nonssl_port: "61616"
    use_ssl: "False"
    destination: "/queue/events"
    brokers: "rucio-activemq"
    ssl_key_file: "/opt/x509/hostkey.pem"
    ssl_cert_file: "/opt/x509/hostcert.pem"
    brokers: "activemq"
    email_from: "bruzzese@pic.es"
    email_test: "bruzzese@pic.es"

  conveyor:
    scheme: "gsiftp,root,https,davs,srm,http"
    transfertool: "fts3"
    ftshosts: "https://fts01.pic.es:8446"
    cacert: "/opt/certs/ca.pem"
    # usercert: "/opt/proxy/proxy-volume"
    usercert: "/opt/proxy/x509up"

  policy:
    permission: "generic"
    schema: "generic"
    lfn2pfn_algorithm_default: "identity"

  monitor:
    carbon_server: "graphite-test.pic.es"
    carbon_port: "2014"
    user_scope: "rucio"
    enable_metrics: "True"

  trace:
    tracedir: "/var/log/rucio/trace"
    brokers: "activemq"
    port: "61616"
    username: "hermes"
    password: "supersecret"
    topic: "/topic/rucio.tracer"

  monitor:
    carbon_server: "graphite-test.pic.es"
    carbon_port: "2014"
    user_scope: "rucio"
    enable_metrics: "True"

automaticRestart:
  enabled: 1
  image:
    repository: bitnami/kubectl
    tag: 1.18
    pullPolicy: IfNotPresent
  schedule: "5 1 * * *"

nodeSelector:
  node: rucio

